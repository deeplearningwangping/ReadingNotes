研发网络应用程序的核心是写出能够运行在不同的端系统和通过网络彼此通信的程序。

## 应用层协议原理
####  两种体系结构：
竟然有两种，我一直只知道第一种。。。P2P是不需要服务器的嘛

1. 客户-服务器体系结构
2. P2P体系结构

#### 进程通信
应用开发者对于运输层的控制权仅限于：
1. 选择运输层协议
2. 也许能设定几个运输层参数，如最大缓存和最大报文段长度

#### 一个运输层协议能够为调用天它的应用程序提供什么样的服务呢？
1. 可靠数据传输
2. 吞吐量
3. 定时
4. 安全性

#### TCP服务
1. 面向连接的服务
2. 可靠的数据传送服务
TCP协议还具有拥塞控制机制
#### UDP服务
UDP是一种不提供不必要服务的轻量级运输协议。它仅提供最小服务。UDP是无连接的，因此在两个进程通信前没有握手过程。UDP协议提供一种不可靠传输数据传送服务。报文也可能是乱序到达的

#### 应用层协议
应用层协议定义了运行在不同端系统上的应用程序进程如何相互传递报文。
* 交换的报文类型，例如请求报文和响应报文
* 各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的
* 字段的语义，即这些字段中的信息的含义
* 确定一个进程何时以及如何发送报文，对报文进行响应的规则

应用层协议只是网络应用的一部分

## Web和HTTP
HTTP服务器不保存关于客户的任何信息，所以说HTTP是一个无状态协议。
非持续连接：每个请求/响应对是经一个单独的TCP连接发送。
持续连接：所有请求及其响应经相同的TCP连接发送。
HTTP可以采用非持续连接和持续连接，默认情况下使用持续连接，性能更好。
HTTP使用非持续连接的缺点：
* 需要为每一个请求的对象建立和维护一个全新的连接。对于每个这样的连接，在客户和服务器中都要分配TCP的缓冲区和保持TCP变量，这给Web服务器带来严重负担。
* 每一个对象要经受两倍的RTT（往返时间，Round-Trip Time）交付延迟。

Web缓存器可以理解为服务器的代理，它同样可以处理客户发送的HTTP请求报文，如果它缓存着请求报文所需对象的副本的话。如果没有，Web缓存器会先向本体Web服务器获取所需对象的副本，再提供服务给客户。
通过“条件GET方法”，保证缓存器的对象是最新的。
采用Web缓存器的好处：
* 大大减少对客户请求的响应时间
* 大大减少一个机构的接入链路到因特网的通信量。通过减少通信量，该机构就不必急于增加带宽，从而降低费用
* 能从整体上大大减低因特网上的Web流量，从而改善所有应用的性能

## 电子邮件
由三部分组成：
* 用户代理
* 邮件服务器
* 简单邮件传输协议（SMTP）
邮件如果发生故障，会在服务器中保持一个报文队列，并且30分钟后尝试重发，如果几天没有发送成功，则删除这个报文。。这种情况我貌似没有遇到过。

SMTP也是使用TCP传输数据的，SMTP一般不使用中间服务器发送邮件，而是两个服务器直连的，不管距离多远。

#### SMTP 和 HTTP 对比
* HTTP是一个拉协议，SMTP是一个推协议
* SMTP 要求每个报文采用7比特 ASCII 码格式， HTTP 不受这个限制
* 既包含文本又包含图形，HTTP 会把每个对象封装到它自己的 HTTP 响应报文中，而 SMTP 则把所有报文对象放在一个报文之中

## DNS：因特网的目录服务

识别主机：
* 主机名（比如：www.facebook.com、www.google.com），这里的主机名就是域名？
* IP 地址（比如：121.7.106.83），由4个字节组成

DNS（域名系统），主机名到 IP 地址的转换。
* 一个由分层的 DNS 服务器实现的分布式数据库
* 一个使得主机能够查询分布式数据库的引用层协议

除了进行主机名到 IP 地址的转换， DNS 还提供了一些重要服务
* 主机别名（这里是指二级域名或者多级域名？）
* 邮件服务器别名
* 负载分配


#### 概述
* 一个由分层的DNS服务器实现的分布式数据库 
* DNS协议运行在UDP上，使用53号端口。 
* 根DNS服务器：在因特网上有13个根DNS服务器 
* 顶级域DNS服务器：负责顶级域名如com、org、net等 
* 权威DNS服务器：一个组织机构的权威DNS服务器收藏了公共可访问的DNS记录。 
* 本地DNS服务器：本地DNS服务器严格说来并不属于服务器的层次结构，但它对DNS层次结构是重要的。

#### DNS缓存
* 为了改善时延性能并减少在因特网上到处传输的DNS报文数量 
*  共同实现DNS分布式数据库的所有DNS服务器存储了资源记录（RR），RR提供了主机名到IP地址的映射。 
* RR包含了4元祖（Name，Value，Type，TTL） 

## P2P
文件分发：
* 体系结构扩展
* BitTorrent
在 P2P 区域中搜索信息：
* 集中式索引
* 查询泛洪
* 层次覆盖：
    * 超级对等方维护索引
    * 超级对等方可以向相邻的超级对等方查询泛洪，范围受限查询泛洪
Skype 的 P2P因特网电话本质是  P2P的

## 视频流和内容分发网
DASH：经 HTTP 的动态适应性流，可以根据客户的带宽来选择流的速率

内容分发网也叫 CDN，分布式？通常采用两种不同的服务器安置原则：
* 深入
* 邀请做客

## 套接字编程
* UDP 套接字编程
* TCP 套接字编程 